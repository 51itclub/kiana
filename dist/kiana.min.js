$.fn.KianaInit=function(s){$(this).css("z-index","999999");$(this).dragging({move:"both",randomPosition:s.randomPosition});var o="http://oe0axpaec.bkt.clouddn.com/kiana-1.png";var n="http://oe0axpaec.bkt.clouddn.com/kiana-2.png";var m="http://oe0axpaec.bkt.clouddn.com/kiana-3.gif";var k="http://oe0axpaec.bkt.clouddn.com/kiana-4.png";var q="http://oe0axpaec.bkt.clouddn.com/kiana_drag.mp3";var t="http://oe0axpaec.bkt.clouddn.com/kiana_1.mp3";var c="http://oe0axpaec.bkt.clouddn.com/kiana_2.mp3";var e="http://oe0axpaec.bkt.clouddn.com/kiana_3.mp3";var g="http://oe0axpaec.bkt.clouddn.com/kiana_4.mp3";var j="http://oe0axpaec.bkt.clouddn.com/kiana_5.mp3";var p="http://oe0axpaec.bkt.clouddn.com/kiana_6.mp3";var r="http://oe0axpaec.bkt.clouddn.com/kiana_7.mp3";var b="http://oe0axpaec.bkt.clouddn.com/kiana_8.mp3";var d="http://oe0axpaec.bkt.clouddn.com/kiana_9.mp3";var h="http://oe0axpaec.bkt.clouddn.com/kiana_10.mp3";var l="http://oe0axpaec.bkt.clouddn.com/kiana_11.mp3";var f=["呀~~","快看快看我抽到了什么","去死去死去死去死！！","主人,人家钱包都空了~","变态！","kiana,变身","哼,mihoyou什么的最讨厌了！！！","千万别小看我哟","要加油哦","我就知道主人最疼人家了","锵锵~","烦死啦走开走开啦！！！",];var a={"呀~~":q,"快看快看我抽到了什么":t,"去死去死去死去死！！":c,"主人,人家钱包都空了~":e,"变态！":g,"kiana,变身":j,"哼,mihoyou什么的最讨厌了！！！":p,"千万别小看我哟":r,"要加油哦":b,"我就知道主人最疼人家了":d,"锵锵~":h,"烦死啦走开走开啦！！！":l,};$(this).append("<div class='kiana'></div>");$(".kiana").append("<div class='kianaImgDiv'></div>");$(".kianaImgDiv").append("<img id='kianaImg' />");$("#kianaImg").prop("src",o);$(".kiana").append("<div class='kianaMP3Div'></div>");$(".kianaMP3Div").append("<audio id='kianaAudio'></audio>");$(".kiana").append("<div class='kianaLanguage'></div>");$(".kiana").append("<div class='kianaCloseBtn'>×</div>");$(".kianaCloseBtn").mousedown(function(){$(".kiana").css("display","none")});var i=false;$(".kianaImgDiv").mouseenter(function(){$("#kianaImg").prop("src",m)}).mouseleave(function(){$("#kianaImg").prop("src",o);$(".kianaCloseBtn").css("display","none");i=false}).mousedown(function(){$("#kianaImg").prop("src",k);var u=GetLanMp3(a,f);Mp3PlayAndShowMsg(u.mp3Src,u.lan);i=true}).mouseup(function(){i=false;if($("#kianaAudio")[0].paused){$("#kianaImg").prop("src",m)}}).mousemove(function(){if(i){$("#kianaImg").prop("src",n);$("#kianaAudio").prop("src",q);$("#kianaAudio")[0].play();$(".kianaLanguage").css("display","block");$(".kianaLanguage").text(f[0])}i=false}).hover(function(){if($(".kianaCloseBtn").css("display")!="blcok"){$(".kianaCloseBtn").css("display","block")}},function(){if($(".kianaCloseBtn").css("display")!="none"){$(".kianaCloseBtn").css("display","none")}});$("#kianaAudio")[0].onended=function(){$(".kianaLanguage").css("display","none");$(".kianaLanguage").text("");$("#kianaImg").prop("src",m)}};$.fn.dragging=function(w){var k=$(this);var p;var f;var e;var d;var h=0;var s=0;var c=k.parent();var m={move:"both",randomPosition:true,hander:1};var b=$.extend({},m,w);var l=b.move;var a=b.randomPosition;var i=b.hander;if(i==1){i=k}else{i=k.find(b.hander)}c.css({"position":"relative","overflow":"hidden"});k.css({"position":"absolute"});i.css({"cursor":"move"});var g=c.width();var j=c.height();var x=k.width()+parseInt(k.css("padding-left"))+parseInt(k.css("padding-right"));var o=k.height()+parseInt(k.css("padding-top"))+parseInt(k.css("padding-bottom"));var v=false;var u;var t;var r;var q;if(a){n()}function n(){k.each(function(y){var z=parseInt(Math.random()*(j-o));var A=parseInt(Math.random()*(g-x));if(l.toLowerCase()=="x"){$(this).css({left:A})}else{if(l.toLowerCase()=="y"){$(this).css({top:z})}else{if(l.toLowerCase()=="both"){$(this).css({top:z,left:A})}}}})}i.mousedown(function(y){k.css({"zIndex":"999999"});v=true;e=y.pageX;d=y.pageY;u=k.position().left;t=k.position().top;return false});$(document).mouseup(function(y){v=false});$(document).mousemove(function(B){p=B.pageX;r=u+p-e;f=B.pageY;q=t+f-d;function A(){if(v==true){k.css({"left":r})}else{return}if(r<0){k.css({"left":"0"})}if(r>(g-x)){k.css({"left":g-x})}return r}function z(){if(v==true){k.css({"top":q})}else{return}if(q<0){k.css({"top":"0"})}if(q>(j-o)){k.css({"top":j-o})}return q}function y(){if(v==true){k.css({"left":r,"top":q})}else{return}if(r<0){k.css({"left":"0"})}if(r>(g-x)){k.css({"left":g-x})}if(q<0){k.css({"top":"0"})}if(q>(j-o)){k.css({"top":j-o})}}if(l.toLowerCase()=="x"){A()}else{if(l.toLowerCase()=="y"){z()}else{if(l.toLowerCase()=="both"){y()}}}})};Mp3PlayAndShowMsg=function(c,b){var a=$("#kianaAudio")[0].paused;if(a){$("#kianaAudio").prop("src",c);$("#kianaAudio")[0].play();$(".kianaLanguage").css("display","block");$(".kianaLanguage").text(b)}};var oldNum;GetLanMp3=function(d,b){while(true){var a=Math.floor(Math.random()*(11+1));if(a<0){a=0}if(a>12){a=12}if(a!=oldNum){break}}oldNum=a;var c={"mp3Src":d[b[a]],"lan":b[a]};return c};